# 📚 프로젝트 소개 
CoreData를 이용한 로그인/로그아웃/회원탈퇴 기능 만들기

---

# 📌 요구 사항
1. **시작하기 화면**
    1. 사용자는 시작하기 버튼을 누를 수 있습니다.
        1. 비회원이면 [회원가입 화면]으로 이동합니다.
        2. 회원이면 [로그인 성공 화면]으로 이동합니다.
    2. 회원/ 비회원 여부는 저장된 로그인 정보로 판단합니다.
2. **회원가입 화면**
    1. 아이디 등록
        1. 아이디는 이메일 주소여야합니다.
            1. 예) `abc@gmail.com`
        2. 아이디는 다음 조건을 만족해야 합니다.
            1. 이메일 영역(@이후) 을 제외하고 최소 6자 이상, 최대 20자 이하여야 합니다.
            2. 영문 소문자(a-z)와 숫자(0-9)만 허용됩니다.
            3. 숫자로 시작할 수 없습니다.
        3. 아이디 중복체크는 회원가입 버튼을 탭할 때 수행됩니다.
    2. 비밀번호 등록
        1. 2개의 입력창이 있습니다.
            1. 비밀번호 입력창
            2. 비밀번호 확인창
        2. 비밀번호 제한 조건
            1. 최소 8자 이상
            2. 이외 추가 조건은 자유롭게 정의하시면 됩니다.
    3. 닉네임 등록
    4. 회원가입 버튼
        1. 회원가입 버튼은 아래 조건에 따라 활성화 됩니다.
            1. 아이디 입력 완료
            2. 비밀번호 입력 완료, 비밀번호 확인창과 일치
            3. 닉네임 입력 완료
        2. 버튼을 탭하면 회원가입을 시도하며, 서버와 통신하는 부분을 로컬 저장으로 대체합니다.
            1. 보통 회원가입 서버 요청이 성공하면 회원가입 정보는 서버가 관리하는 DB 에 저장되어야하지만, 이 과제에는 서버 요청을 생략하고 회원가입 정보를 CoreData 에 저장합니다.
        3. 회원가입 성공 조건
            1. 입력한 이메일이 **로컬 DB에 저장된 아이디(이메일)와 중복되지 않아야 합니다.**
        4. 회원가입에 성공하였다면 [로그인 성공 화면]으로 이동합니다.
    5. 이외 사용자를 위한 부가적인 UX 들은 자유롭게 추가해주세요.
3. **로그인 성공 화면**
    1. 화면에 진입하였을 때 사용자의 “{닉네임} 님 환영합니다.”을 화면에 표시합니다.
    2. 로그아웃 버튼이 존재합니다. 탭 시 [시작하기 화면]으로 이동합니다.
    3. 회원탈퇴 버튼이 존재합니다. 탭 시, CoreData 에서 회원정보가 삭제되고 [시작하기 화면]으로 이동합니다.
---

# 🎬 앱 미리보기
## 시작하기 화면
<img src="https://github.com/user-attachments/assets/73719d0c-d131-421a-911b-b3daf164fb26" width="40%" height="40%">

## 회원가입 화면
<img src="https://github.com/user-attachments/assets/e1133c04-23bc-4c0f-9f44-090fa2ef5d66" width="40%" height="40%">

## 로그인 성공 화면
<img src="https://github.com/user-attachments/assets/6248beed-f371-444b-9f63-171984901907" width="40%" height="40%">

---

# 🔎 파일 구성
## Features 폴더
각 화면에 맞는 기능을 구현한 클래스가 작성되어 있는 폴더입니다.
- Start: 시작하기 화면입니다.
  - StartView: 시작하기 화면의 UI를 작성한 클래스 입니다.
  - StartViewControlelr: StartView의 텍스트 필드 입력 및 버튼 탭 이벤트 처리를 위한 Controller입니다.
  - StartViewModel: 비즈니스 로직과 뷰컨트롤러 사이를 연결하는 뷰모델입니다. UserService에 로그인을 요청합니다.
- SignUp: 회원가입 화면입니다.
  - SignUp: 회원가입 화면의 UI를 작성한 클래스 입니다.
  - SignUpViewControlelr: SignUp의 텍스트 필드 입력 및 버튼 탭 이벤트 처리를 위한 Controller입니다. 키보드에 따른 스크롤 처리가 포함되어 있습니다.
  - SignUpViewModel: 회원가입 처리 UserService에 요청하고, 필드 입력의 유효성을 검사합니다.
- Home: 로그인 성공 화면입니다.
  - HomeView: 로그인 성공 화면의 UI를 작성한 클래스 입니다.
  - HomeViewController: 사용자 입력을 뷰모델에 전달하여 입력을 처리합니다.
  - HomeViewModel: 로그아웃과 회원탈퇴에 대한 로직을 처리합니다.

## Repository 폴더
CoreData를 통해 저장소에 접근하여 CRUD를 실행할 UserRepository 클래스가 작성되어 있는 폴더입니다.
- UserRepository: 해당 요구사항에 필요한 계정 생성, 조회, 삭제를 위한 Create, Read, Delete 메서드가 작성되어 있습니다.
- UserRepository+Error: 저장소에 접근할 때 발생할 에러를 정의한 UserRepositoryError Enum이 정의되어 있습니다.

## Service 폴더
Repository와 ViewModel 사이에서 비즈니스 로직을 처리할 UserService 클래스가 작성되어 있는 폴더입니다.
- UserService: UserRepository는 코어데이터에 집중하고, ViewModel은 뷰를 관리하는데 집중하도록 책임을 분리하기 위한 Service계층입니다. 해당 과제에선 UserService의 고유한 비즈니스 로직은 중복 검사를 통한 중복 회원 가입 방지 정도입니다.
- UserService+Error: UserService 계층에서 발생한 에러를 정의한 UserServiceError Eunm이 정의되어 있습니다.

## CoreData 폴더
코어데이터를 다루기 위한 context 관리를 Repository로부터 분리시킨 CoreDataStack 클래스와, 사용자 정보를 계층간에 안전하게 전달하기 위한 구조체 UserDTO가 작성되어 있는 폴더입니다.

## Manager 폴더
자동로그인을 위해 로그인/로그아웃 정보를 UserDefaults에 저장합니다. UserDefaults를 하드코딩으로 다루지 않기 위한 LoginSessionManager Enum이 작성되어 있습니다.

---

# 🙏 커밋 컨벤션
- [Feat] 새로운 기능 추가
- [Fix] 버그 수정
- [Modify] 간단한 기능 코드 수정
- [Delete] 기능 삭제
- [Refactor] 코드 리팩토링
- [Merge] 머지 커밋
- [Docs] 문서 수정 (ReadMe, 주석 등)
- [Style] 코드 스타일 수정 (들여쓰기, 괄호 공백 등)
- [Test] 테스트 코드, 리팩토링 테스트 코드 추가
- [Chore] 빌드 업무 수정, 패키지 매니저 수정

---

# 고민한 내용
가벼운 요구사항을 위해 간단하게 MVC 패턴으로 구현하고자 했으나, 단일 책임 원칙을 지키고자 최대한 기능을 분리하다보니 단순한 과제임에도 Repository나 Service 계층을 만들고, 일관되고 논리적인 유저 이벤트 처리를 위해 MVVM 패턴을 도입하게 되었습니다.
시간안에 요구 사항을 만족하는 앱을 만드는 것과, 단순하더라도 확장성을 위해 단일 책임 원칙과 논리적인 코드 흐름 사이에서 어느것이 더 옳은 결정인지 고민하는 과정이 처음부터 끝까지 계속 되었습니다.
고민 끝에 내린 결론은, 사용자 눈에 보일 부분(화면 이동이나 스크롤, alert 등)은 복잡하게 구현 하더라도 단순하게 하는 것과 큰 차이가 없으니 단순하지만 빠르게 구현하고, 추가 요구사항은 없더라도 확장성에 대비해 계층 구조는 잘 잡아두고자 했습니다.

